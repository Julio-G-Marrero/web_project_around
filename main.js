!function(){"use strict";var e=document.querySelector(".modal-place"),t=document.querySelector(".modal-img"),n=document.querySelector(".modal-perfil"),o=document.querySelector(".overlay"),r=document.querySelector(".profile__button"),i=document.querySelector(".modal__close-place "),a=document.querySelector(".modal__close-perfil "),l=document.querySelector(".modal-img__close"),c=document.querySelector(".profile__add-place"),u=n.querySelector(".modal__input_name"),s=n.querySelector(".modal__input_job"),f=document.querySelector(".profile__name"),m=document.querySelector(".profile__rol");function p(e){e.classList.toggle("disabled"),o.style.display="block"}function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,v(o.key),o)}}function v(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=y(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}r.addEventListener("click",(function(){p(n),u.value=f.textContent,s.value=m.textContent})),i.addEventListener("click",(function(){p(e),o.style.display="none"})),a.addEventListener("click",(function(){p(n),o.style.display="none"})),l.addEventListener("click",(function(){p(t),o.style.display="none"})),c.addEventListener("click",(function(){p(e)})),o.addEventListener("click",(function(){o.style.display="none";var e=document.querySelectorAll(".modal");document.querySelectorAll(".modal-img").forEach((function(e){e.classList.add("disabled")})),e.forEach((function(e){e.classList.add("disabled")}))})),document.addEventListener("keydown",(function(e){if("Escape"===e.key){var t=document.querySelectorAll(".modal");document.querySelectorAll(".modal-img").forEach((function(e){e.classList.add("disabled")})),t.forEach((function(e){e.classList.add("disabled")})),o.style.display="none"}}));var b=function(){return e=function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._title=t,this._image=n,this._selector=o},(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._selector).content.querySelector(".places__element").cloneNode(!0)}},{key:"_setEventListeners",value:function(e,n,o){var r=this;e.addEventListener("click",(function(){var e,n,o,i;e=r._image,n=r._title,o=document.querySelector(".modal-img__src"),i=document.querySelector(".modal-img__title"),o.src=e,i.textContent=n,p(t)})),n.addEventListener("click",(function(e){n.classList.toggle("like_active")})),o.addEventListener("click",(function(){o.closest(".places__element").remove()}))}},{key:"createCard",value:function(){var e=this._getTemplate(),t=e.querySelector(".places__title"),n=e.querySelector(".places__like"),o=e.querySelector(".places__trash-icon"),r=e.querySelector(".places__image");return r.src=this._image,r.alt=this._title,this._setEventListeners(r,n,o),t.textContent=this._title,e}}])&&d(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function S(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,h(o.key),o)}}function h(e){var t=function(e,t){if("object"!=_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=_(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_(t)?t:t+""}function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function w(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,g(o.key),o)}}function g(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=E(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==E(t)?t:t+""}function k(e,t,n){return t=j(t),function(e,t){if(t&&("object"==E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,q()?Reflect.construct(t,n||[],j(e).constructor):t.apply(e,n))}function q(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(q=function(){return!!e})()}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}function L(e,t){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},L(e,t)}var P=function(e){function t(e,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=k(this,t,[e]))._popupElement=e,o._isOpen=!1,o._overlay=document.querySelector(".overlay"),o._submit=n,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(t,e),n=t,o=[{key:"_getInputValues",value:function(){var e=this._popupElement.querySelector(".modal__input_title"),t=this._popupElement.querySelector(".modal__input_url"),n=this._popupElement.querySelector(".modal__input_name"),o=this._popupElement.querySelector(".modal__input_job");return"modal-place"==this._popupElement.classList[1]?{inputName:e,inputInfo:t,modal:"palce"}:{inputName:n,inputInfo:o,modal:"profile"}}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("submit",(function(t){t.preventDefault();var n=e._getInputValues(),o={modalForm:e._popupElement,valuesInput:{titleInput:n.inputName,urlInfo:n.inputInfo}},r=new R(o,o.valuesInput.titleInput),i=new R(o,o.valuesInput.urlInfo);r.enableValidation(),i.enableValidation()}))}}],o&&w(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=t,this._overlay=document.querySelector(".overlay")},(t=[{key:"open",value:function(){this._popup.classList.toggle("disabled")}},{key:"close",value:function(){this._popup.classList.toggle("disabled"),this._overlay.style.display="none"}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&(this.close(),this._overlay.style.display="none")}},{key:"setEventListeners",value:function(){this._popup.addEventListener("keydown",(function(e){this._handleEscClose(e)})),this._overlay.addEventListener("click",(function(){this._overlay.classList.toggle("disabled")}))}}])&&S(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}());function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function O(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,I(o.key),o)}}function I(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=C(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==C(t)?t:t+""}var T=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._objElements=t},t=[{key:"getUserInfo",value:function(e){return"name"==e?this._objElements.name.textContent:"job"==e?this._objElements.job.textContent:void 0}},{key:"setUserInfo",value:function(e,t){var n=document.querySelector(".profile__name"),o=document.querySelector(".profile__rol");"name"==e?n.textContent=t:"job"==e&&(o.textContent=t)}}],t&&O(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function A(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,V(o.key),o)}}function V(e){var t=function(e,t){if("object"!=x(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=x(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==x(t)?t:t+""}document.querySelector(".overlay");var B=new P(document.querySelector(".modal-perfil")),z=new P(document.querySelector(".modal-place"),"submit"),U=document.querySelector(".modal__input_title"),W=document.querySelector(".modal__input_url"),N=document.querySelector(".places__elements"),D=new T({}),R=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._objConfig=t,this._toValidate=n},(t=[{key:"enableValidation",value:function(){this._setValidation()}},{key:"_setValidation",value:function(){var e=this._objConfig.modalForm.classList[1],t=this._toValidate.classList.value;t="."+t.replaceAll(" ",".");var n=document.querySelector(t);if(""!=n.value){if("modal-place"==e){var o=new b(U.value,W.value,"#cardElement").createCard();return N.prepend(o),U.value="",W.value="",z.close(),o}if("modal-perfil"!=e)return;"name-input"==this._toValidate.id?D.setUserInfo("name",n.value):"profesion-input"==this._toValidate.id&&(B.close(),D.setUserInfo("job",n.value))}}}])&&A(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function M(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Y(o.key),o)}}function Y(e){var t=function(e,t){if("object"!=F(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=F(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==F(t)?t:t+""}z.setEventListeners(),B.setEventListeners();var G=function(){return e=function e(t,n){var o=t.items,r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=o,this._renderer=r,this._container=document.querySelector(n)},(t=[{key:"renderer",value:function(){var e=this;this._items.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.append(e)}}])&&M(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),H=document.querySelector(".overlay"),J=document.querySelector(".profile__name"),K=document.querySelector(".profile__rol"),Q=new T({name:J,job:K});J.textContent=Q.getUserInfo("name"),K.textContent=Q.getUserInfo("job");var X=new G({items:[{name:"Valle de Yosemite",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/yosemite.jpg"},{name:"Lago Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lake-louise.jpg"},{name:"MontaÃ±as Calvas",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/latemar.jpg"},{name:"Parque Nacional de la Vanoise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lago.jpg"}],renderer:function(e){var t=new b(e.name,e.link,"#cardElement").createCard();X.addItem(t)}},".places__elements");X.renderer();Array.from(document.querySelectorAll(".form")).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),function(e){Array.from(e.querySelectorAll(".form__input")).forEach((function(t){t.addEventListener("input",(function(){!function(e,t){t.validity.valid?function(e,t){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.remove("form__input_type_error"),n.classList.remove("form__input-error_active"),n.textContent=""}(e,t):function(e,t,n){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.add("form__input_type_error"),console.log(".".concat(t.id,"-error")),o.textContent=n,o.classList.add("form__input-error_active")}(e,t,t.validationMessage)}(e,t)}))}))}(e)})),H.addEventListener("click",(function(){H.style.display="none";var e=document.querySelectorAll(".modal");document.querySelectorAll(".modal-img").forEach((function(e){e.classList.add("disabled")})),e.forEach((function(e){e.classList.add("disabled")}))})),document.addEventListener("keydown",(function(e){if("Escape"===e.key){var t=document.querySelectorAll(".modal");document.querySelectorAll(".modal-img").forEach((function(e){e.classList.add("disabled")})),t.forEach((function(e){e.classList.add("disabled")})),H.style.display="none"}}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dGlscy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvanMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvanMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvanMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2pzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9qcy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9qcy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9qcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb2RhbFBsYWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbC1wbGFjZVwiKTtcclxuY29uc3QgbW9kYWxJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwtaW1nXCIpO1xyXG5jb25zdCBtb2RhbFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLXBlcmZpbFwiKTtcclxuY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3ZlcmxheVwiKTtcclxuY29uc3QgcHJvZmlsZUVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2J1dHRvblwiKTtcclxuY29uc3QgbW9kYWxDbG9zZVBsYWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtcGxhY2UgXCIpO1xyXG5jb25zdCBtb2RhbENsb3NlUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLXBlcmZpbCBcIik7XHJcbmNvbnN0IG1vZGFsQ2xvc2VJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwtaW1nX19jbG9zZVwiKTtcclxuY29uc3QgcHJvZmlsZUFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLXBsYWNlXCIpO1xyXG5jb25zdCBuYW1lSW5wdXQgPSBtb2RhbFByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW5wdXRfbmFtZVwiKTtcclxuY29uc3Qgam9iSW5wdXQgPSBtb2RhbFByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW5wdXRfam9iXCIpO1xyXG5jb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKTtcclxuY29uc3QgcHJvZmlsZUpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fcm9sXCIpO1xyXG5cclxuZnVuY3Rpb24gc2hvd01vZGFsKG1vZGFsKSB7XHJcbiAgbW9kYWwuY2xhc3NMaXN0LnRvZ2dsZShcImRpc2FibGVkXCIpO1xyXG4gIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxufVxyXG5mdW5jdGlvbiBvcGVuSW1nTW9kYWwoaW1nLCB0aXRsZSkge1xyXG4gIGNvbnN0IGltZ01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbC1pbWdfX3NyY1wiKTtcclxuICBjb25zdCB0aXRsZUNhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLWltZ19fdGl0bGVcIik7XHJcbiAgaW1nTW9kYWwuc3JjID0gaW1nO1xyXG4gIHRpdGxlQ2FyZC50ZXh0Q29udGVudCA9IHRpdGxlO1xyXG4gIHNob3dNb2RhbChtb2RhbEltYWdlKTtcclxufVxyXG5cclxucHJvZmlsZUVkaXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBzaG93TW9kYWwobW9kYWxQcm9maWxlKTtcclxuXHJcbiAgbmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZU5hbWUudGV4dENvbnRlbnQ7XHJcbiAgam9iSW5wdXQudmFsdWUgPSBwcm9maWxlSm9iLnRleHRDb250ZW50O1xyXG59KTtcclxuXHJcbm1vZGFsQ2xvc2VQbGFjZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHNob3dNb2RhbChtb2RhbFBsYWNlKTtcclxuICBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxufSk7XHJcbm1vZGFsQ2xvc2VQcm9maWxlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgc2hvd01vZGFsKG1vZGFsUHJvZmlsZSk7XHJcbiAgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbn0pO1xyXG5tb2RhbENsb3NlSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBzaG93TW9kYWwobW9kYWxJbWFnZSk7XHJcbiAgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbn0pO1xyXG5wcm9maWxlQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgc2hvd01vZGFsKG1vZGFsUGxhY2UpO1xyXG59KTtcclxub3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gIGNvbnN0IG1vZGFscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxcIik7XHJcbiAgY29uc3QgaW1hZ2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbC1pbWdcIik7XHJcbiAgaW1hZ2VzLmZvckVhY2goZnVuY3Rpb24gKGltZykge1xyXG4gICAgaW1nLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICB9KTtcclxuICBtb2RhbHMuZm9yRWFjaChmdW5jdGlvbiAobW9kYWwpIHtcclxuICAgIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICB9KTtcclxufSk7XHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGZ1bmN0aW9uIChldnQpIHtcclxuICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgY29uc3QgbW9kYWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbFwiKTtcclxuICAgIGNvbnN0IGltYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWwtaW1nXCIpO1xyXG4gICAgaW1hZ2VzLmZvckVhY2goZnVuY3Rpb24gKGltZykge1xyXG4gICAgICBpbWcuY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgfSk7XHJcbiAgICBtb2RhbHMuZm9yRWFjaChmdW5jdGlvbiAobW9kYWwpIHtcclxuICAgICAgbW9kYWwuY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgfSk7XHJcbiAgICBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICB9XHJcbn0pO1xyXG5cclxuZXhwb3J0IHsgb3BlbkltZ01vZGFsIGFzIG9wZW5Nb2RhbCwgc2hvd01vZGFsLCBtb2RhbFByb2ZpbGUgfTtcclxuIiwiaW1wb3J0IHsgb3Blbk1vZGFsIH0gZnJvbSBcIi4vdXRpbHMuanNcIjtcclxuY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IodGl0bGUsIGltYWdlLCBzZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fdGl0bGUgPSB0aXRsZTtcclxuICAgIHRoaXMuX2ltYWdlID0gaW1hZ2U7XHJcbiAgICB0aGlzLl9zZWxlY3RvciA9IHNlbGVjdG9yO1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgdGVtcGxhdGVDYXJkID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VzX19lbGVtZW50XCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICByZXR1cm4gdGVtcGxhdGVDYXJkO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKGltZ0NhcmQsIGxpa2VCdXR0b24sIHRyYXNoQnV0dG9uKSB7XHJcbiAgICBpbWdDYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIG9wZW5Nb2RhbCh0aGlzLl9pbWFnZSwgdGhpcy5fdGl0bGUpO1xyXG4gICAgfSk7XHJcbiAgICBsaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgICBsaWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJsaWtlX2FjdGl2ZVwiKTtcclxuICAgIH0pO1xyXG4gICAgdHJhc2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgY29uc3QgbGlzdEl0ZW0gPSB0cmFzaEJ1dHRvbi5jbG9zZXN0KFwiLnBsYWNlc19fZWxlbWVudFwiKTtcclxuICAgICAgbGlzdEl0ZW0ucmVtb3ZlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNyZWF0ZUNhcmQoKSB7XHJcbiAgICBjb25zdCB0ZW1wbGF0ZUNhcmQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgY29uc3QgY2FyZFRpdGxlID0gdGVtcGxhdGVDYXJkLnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VzX190aXRsZVwiKTtcclxuICAgIGNvbnN0IGxpa2VCdXR0b24gPSB0ZW1wbGF0ZUNhcmQucXVlcnlTZWxlY3RvcihcIi5wbGFjZXNfX2xpa2VcIik7XHJcbiAgICBjb25zdCB0cmFzaEJ1dHRvbiA9IHRlbXBsYXRlQ2FyZC5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlc19fdHJhc2gtaWNvblwiKTtcclxuICAgIGNvbnN0IGltZ0NhcmQgPSB0ZW1wbGF0ZUNhcmQucXVlcnlTZWxlY3RvcihcIi5wbGFjZXNfX2ltYWdlXCIpO1xyXG4gICAgaW1nQ2FyZC5zcmMgPSB0aGlzLl9pbWFnZTtcclxuICAgIGltZ0NhcmQuYWx0ID0gdGhpcy5fdGl0bGU7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycyhpbWdDYXJkLCBsaWtlQnV0dG9uLCB0cmFzaEJ1dHRvbik7XHJcbiAgICBjYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl90aXRsZTtcclxuXHJcbiAgICByZXR1cm4gdGVtcGxhdGVDYXJkO1xyXG4gIH1cclxufVxyXG5leHBvcnQgeyBDYXJkIH07XHJcbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuaW1wb3J0IHsgRm9ybSB9IGZyb20gXCIuL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuXHJcbmNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBFbGVtZW50LCBzdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwRWxlbWVudCk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBwb3B1cEVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pc09wZW4gPSBmYWxzZTtcclxuICAgIHRoaXMuX292ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXlcIik7XHJcbiAgICB0aGlzLl9zdWJtaXQgPSBzdWJtaXQ7XHJcbiAgfVxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGlucHV0TmFtZUNhcmRQbGFjZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbF9faW5wdXRfdGl0bGVcIlxyXG4gICAgKTtcclxuICAgIGNvbnN0IGlucHV0VXJsQ2FyZFBsYWNlID1cclxuICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2lucHV0X3VybFwiKTtcclxuICAgIGNvbnN0IG5hbWVJbnB1dCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbnB1dF9uYW1lXCIpO1xyXG4gICAgY29uc3Qgam9iSW5wdXQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW5wdXRfam9iXCIpO1xyXG4gICAgY29uc3QgbW9kYWxUeXBlID0gdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdFsxXTtcclxuICAgIGlmIChtb2RhbFR5cGUgPT0gXCJtb2RhbC1wbGFjZVwiKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgaW5wdXROYW1lOiBpbnB1dE5hbWVDYXJkUGxhY2UsXHJcbiAgICAgICAgaW5wdXRJbmZvOiBpbnB1dFVybENhcmRQbGFjZSxcclxuICAgICAgICBtb2RhbDogXCJwYWxjZVwiLFxyXG4gICAgICB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHsgaW5wdXROYW1lOiBuYW1lSW5wdXQsIGlucHV0SW5mbzogam9iSW5wdXQsIG1vZGFsOiBcInByb2ZpbGVcIiB9O1xyXG4gICAgfVxyXG4gIH1cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xyXG4gICAgICBjb25zdCBvYmpDb25maWdQbGFjZSA9IHtcclxuICAgICAgICBtb2RhbEZvcm06IHRoaXMuX3BvcHVwRWxlbWVudCxcclxuICAgICAgICB2YWx1ZXNJbnB1dDoge1xyXG4gICAgICAgICAgdGl0bGVJbnB1dDogaW5wdXRWYWx1ZXMuaW5wdXROYW1lLFxyXG4gICAgICAgICAgdXJsSW5mbzogaW5wdXRWYWx1ZXMuaW5wdXRJbmZvLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCB0aXRsZVZhbGlkYXRlID0gbmV3IEZvcm0oXHJcbiAgICAgICAgb2JqQ29uZmlnUGxhY2UsXHJcbiAgICAgICAgb2JqQ29uZmlnUGxhY2UudmFsdWVzSW5wdXQudGl0bGVJbnB1dFxyXG4gICAgICApO1xyXG4gICAgICBjb25zdCB1cmxWYWxpZGF0ZSA9IG5ldyBGb3JtKFxyXG4gICAgICAgIG9iakNvbmZpZ1BsYWNlLFxyXG4gICAgICAgIG9iakNvbmZpZ1BsYWNlLnZhbHVlc0lucHV0LnVybEluZm9cclxuICAgICAgKTtcclxuICAgICAgdGl0bGVWYWxpZGF0ZS5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgICAgIHVybFZhbGlkYXRlLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5leHBvcnQgeyBQb3B1cFdpdGhGb3JtIH07XHJcbiIsImNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cEVsZW1lbnQpIHtcclxuICAgIHRoaXMuX3BvcHVwID0gcG9wdXBFbGVtZW50O1xyXG4gICAgdGhpcy5fb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3ZlcmxheVwiKTtcclxuICB9XHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC50b2dnbGUoXCJkaXNhYmxlZFwiKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnRvZ2dsZShcImRpc2FibGVkXCIpO1xyXG4gICAgdGhpcy5fb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgfVxyXG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgdGhpcy5fb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZShldnQpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9vdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHRoaXMuX292ZXJsYXkuY2xhc3NMaXN0LnRvZ2dsZShcImRpc2FibGVkXCIpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbmV4cG9ydCB7IFBvcHVwIH07XHJcbiIsImNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3RvcihvYmpFbGVtZW50cykge1xyXG4gICAgdGhpcy5fb2JqRWxlbWVudHMgPSBvYmpFbGVtZW50cztcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKGZpZWxkKSB7XHJcbiAgICBpZiAoZmllbGQgPT0gXCJuYW1lXCIpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX29iakVsZW1lbnRzW1wibmFtZVwiXS50ZXh0Q29udGVudDtcclxuICAgIH0gZWxzZSBpZiAoZmllbGQgPT0gXCJqb2JcIikge1xyXG4gICAgICByZXR1cm4gdGhpcy5fb2JqRWxlbWVudHNbXCJqb2JcIl0udGV4dENvbnRlbnQ7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHNldFVzZXJJbmZvKGZpZWxkLCB2YWx1ZSkge1xyXG4gICAgLy9Ub21hIGxvcyBkYXRvcyBkZWwgbnVldm8gdXN1YXJpbyB5IGxvcyBhZ3JlZ2EgZW4gbGEgcGFnaW5hXHJcbiAgICB2YXIgdXNlck5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XHJcbiAgICB2YXIgdXNlckpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fcm9sXCIpO1xyXG4gICAgaWYgKGZpZWxkID09IFwibmFtZVwiKSB7XHJcbiAgICAgIHVzZXJOYW1lLnRleHRDb250ZW50ID0gdmFsdWU7XHJcbiAgICB9IGVsc2UgaWYgKGZpZWxkID09IFwiam9iXCIpIHtcclxuICAgICAgdXNlckpvYi50ZXh0Q29udGVudCA9IHZhbHVlO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5leHBvcnQgeyBVc2VySW5mbyBhcyBVc2VyIH07XHJcbiIsImltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tIFwiLi9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi9DYXJkLmpzXCI7XHJcbmltcG9ydCB7IFVzZXIgfSBmcm9tIFwiLi9Vc2VySW5mby5qc1wiO1xyXG5cclxuY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3ZlcmxheVwiKTtcclxuY29uc3QgbW9kYWxQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbC1wZXJmaWxcIikpO1xyXG5jb25zdCBtb2RhbFBsYWNlID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbC1wbGFjZVwiKSxcclxuICBcInN1Ym1pdFwiXHJcbik7XHJcblxyXG5jb25zdCBpbnB1dE5hbWVDYXJkUGxhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbnB1dF90aXRsZVwiKTtcclxuY29uc3QgaW5wdXRVcmxDYXJkUGxhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbnB1dF91cmxcIik7XHJcblxyXG5jb25zdCBjb250YWluZXJDYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VzX19lbGVtZW50c1wiKTtcclxuXHJcbmNvbnN0IG5ld1VzZXIgPSBuZXcgVXNlcih7fSk7XHJcbmNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKG9iakNvbmZpZywgdG9WYWxpZGF0ZSkge1xyXG4gICAgdGhpcy5fb2JqQ29uZmlnID0gb2JqQ29uZmlnO1xyXG4gICAgdGhpcy5fdG9WYWxpZGF0ZSA9IHRvVmFsaWRhdGU7XHJcbiAgfVxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9zZXRWYWxpZGF0aW9uKCk7XHJcbiAgfVxyXG4gIF9zZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgY29uc3QgdHlwZU1vZGFsID0gdGhpcy5fb2JqQ29uZmlnLm1vZGFsRm9ybS5jbGFzc0xpc3RbMV07XHJcbiAgICBsZXQgY2xhc3NJbnB1dCA9IHRoaXMuX3RvVmFsaWRhdGUuY2xhc3NMaXN0LnZhbHVlO1xyXG4gICAgY2xhc3NJbnB1dCA9IFwiLlwiICsgY2xhc3NJbnB1dC5yZXBsYWNlQWxsKFwiIFwiLCBcIi5cIik7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjbGFzc0lucHV0KTtcclxuXHJcbiAgICBpZiAoaW5wdXRWYWx1ZS52YWx1ZSAhPSBcIlwiKSB7XHJcbiAgICAgIGxldCBjbGFzc0VsZW1lbnQgPSBcIlwiO1xyXG4gICAgICBpZiAodHlwZU1vZGFsID09IFwibW9kYWwtcGxhY2VcIikge1xyXG4gICAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgICAgICAgIGlucHV0TmFtZUNhcmRQbGFjZS52YWx1ZSxcclxuICAgICAgICAgIGlucHV0VXJsQ2FyZFBsYWNlLnZhbHVlLFxyXG4gICAgICAgICAgXCIjY2FyZEVsZW1lbnRcIlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgY29uc3QgbmV3Q2FyZCA9IGNhcmQuY3JlYXRlQ2FyZCgpO1xyXG4gICAgICAgIGNvbnRhaW5lckNhcmRzLnByZXBlbmQobmV3Q2FyZCk7XHJcbiAgICAgICAgaW5wdXROYW1lQ2FyZFBsYWNlLnZhbHVlID0gXCJcIjtcclxuICAgICAgICBpbnB1dFVybENhcmRQbGFjZS52YWx1ZSA9IFwiXCI7XHJcblxyXG4gICAgICAgIG1vZGFsUGxhY2UuY2xvc2UoKTtcclxuICAgICAgICByZXR1cm4gbmV3Q2FyZDtcclxuICAgICAgfSBlbHNlIGlmICh0eXBlTW9kYWwgPT0gXCJtb2RhbC1wZXJmaWxcIikge1xyXG4gICAgICAgIGlmICh0aGlzLl90b1ZhbGlkYXRlLmlkID09IFwibmFtZS1pbnB1dFwiKSB7XHJcbiAgICAgICAgICBuZXdVc2VyLnNldFVzZXJJbmZvKFwibmFtZVwiLCBpbnB1dFZhbHVlLnZhbHVlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX3RvVmFsaWRhdGUuaWQgPT0gXCJwcm9mZXNpb24taW5wdXRcIikge1xyXG4gICAgICAgICAgbW9kYWxQcm9maWxlLmNsb3NlKCk7XHJcbiAgICAgICAgICBuZXdVc2VyLnNldFVzZXJJbmZvKFwiam9iXCIsIGlucHV0VmFsdWUudmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxubW9kYWxQbGFjZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5tb2RhbFByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmV4cG9ydCB7IEZvcm1WYWxpZGF0b3IgYXMgRm9ybSB9O1xyXG4iLCJjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjbGFzc1JlbmRlcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNsYXNzUmVuZGVyKTtcclxuICB9XHJcbiAgcmVuZGVyZXIoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbmV4cG9ydCB7IFNlY3Rpb24gfTtcclxuIiwiaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuL0NhcmQuanNcIjtcclxuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gXCIuL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IHsgVXNlciB9IGZyb20gXCIuL1VzZXJJbmZvLmpzXCI7XHJcblxyXG5jb25zdCBvdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5vdmVybGF5XCIpO1xyXG52YXIgdXNlck5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XHJcbnZhciB1c2VySm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19yb2xcIik7XHJcbmNvbnN0IHVzZXJPYmogPSB7XHJcbiAgbmFtZTogdXNlck5hbWUsXHJcbiAgam9iOiB1c2VySm9iLFxyXG59O1xyXG5jb25zdCB1c2VyID0gbmV3IFVzZXIodXNlck9iaik7XHJcbnVzZXJOYW1lLnRleHRDb250ZW50ID0gdXNlci5nZXRVc2VySW5mbyhcIm5hbWVcIik7XHJcbnVzZXJKb2IudGV4dENvbnRlbnQgPSB1c2VyLmdldFVzZXJJbmZvKFwiam9iXCIpO1xyXG5cclxuY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFsbGUgZGUgWW9zZW1pdGVcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9uZXctbWFya2V0cy9XRUJfc3ByaW50XzUvRVMveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJNb250YcOxYXMgQ2FsdmFzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlBhcnF1ZSBOYWNpb25hbCBkZSBsYSBWYW5vaXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbi8vQcOxYWRpciBjYXJkIGFsIGNhcmdhclxyXG5jb25zdCBsb2FkQ2FyZHMgPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChpdGVtLm5hbWUsIGl0ZW0ubGluaywgXCIjY2FyZEVsZW1lbnRcIik7XHJcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5jcmVhdGVDYXJkKCk7XHJcbiAgICAgIGxvYWRDYXJkcy5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBcIi5wbGFjZXNfX2VsZW1lbnRzXCJcclxuKTtcclxubG9hZENhcmRzLnJlbmRlcmVyKCk7XHJcblxyXG4vL3ZhbGlkYWNpb24gZm9ybXNcclxuY29uc3Qgc2hvd0lucHV0RXJyb3IgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSA9PiB7XHJcbiAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiKTtcclxuICBjb25zb2xlLmxvZyhgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWVycm9yX2FjdGl2ZVwiKTtcclxufTtcclxuXHJcbmNvbnN0IGhpZGVJbnB1dEVycm9yID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQpID0+IHtcclxuICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIpO1xyXG4gIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlXCIpO1xyXG4gIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbn07XHJcblxyXG5jb25zdCBjaGVja0lucHV0VmFsaWRpdHkgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCkgPT4ge1xyXG4gIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICBzaG93SW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50KTtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCBzZXRFdmVudExpc3RlbmVycyA9IChmb3JtRWxlbWVudCkgPT4ge1xyXG4gIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19pbnB1dFwiKSk7XHJcbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGNoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9ICgpID0+IHtcclxuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtXCIpKTtcclxuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xyXG4gICAgZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICBzZXRFdmVudExpc3RlbmVycyhmb3JtRWxlbWVudCk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5vdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgY29uc3QgbW9kYWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbFwiKTtcclxuICBjb25zdCBpbWFnZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsLWltZ1wiKTtcclxuICBpbWFnZXMuZm9yRWFjaChmdW5jdGlvbiAoaW1nKSB7XHJcbiAgICBpbWcuY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gIH0pO1xyXG4gIG1vZGFscy5mb3JFYWNoKGZ1bmN0aW9uIChtb2RhbCkge1xyXG4gICAgbW9kYWwuY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gIH0pO1xyXG59KTtcclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgZnVuY3Rpb24gKGV2dCkge1xyXG4gIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICBjb25zdCBtb2RhbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsXCIpO1xyXG4gICAgY29uc3QgaW1hZ2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbC1pbWdcIik7XHJcbiAgICBpbWFnZXMuZm9yRWFjaChmdW5jdGlvbiAoaW1nKSB7XHJcbiAgICAgIGltZy5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICB9KTtcclxuICAgIG1vZGFscy5mb3JFYWNoKGZ1bmN0aW9uIChtb2RhbCkge1xyXG4gICAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICB9KTtcclxuICAgIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gIH1cclxufSk7XHJcbiJdLCJuYW1lcyI6WyJtb2RhbFBsYWNlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibW9kYWxJbWFnZSIsIm1vZGFsUHJvZmlsZSIsIm92ZXJsYXkiLCJwcm9maWxlRWRpdCIsIm1vZGFsQ2xvc2VQbGFjZSIsIm1vZGFsQ2xvc2VQcm9maWxlIiwibW9kYWxDbG9zZUltYWdlIiwicHJvZmlsZUFkZEJ1dHRvbiIsIm5hbWVJbnB1dCIsImpvYklucHV0IiwicHJvZmlsZU5hbWUiLCJwcm9maWxlSm9iIiwic2hvd01vZGFsIiwibW9kYWwiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJzdHlsZSIsImRpc3BsYXkiLCJhZGRFdmVudExpc3RlbmVyIiwidmFsdWUiLCJ0ZXh0Q29udGVudCIsIm1vZGFscyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiaW1nIiwiYWRkIiwiZXZ0Iiwia2V5IiwiQ2FyZCIsInRpdGxlIiwiaW1hZ2UiLCJzZWxlY3RvciIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfdGl0bGUiLCJfaW1hZ2UiLCJfc2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiaW1nQ2FyZCIsImxpa2VCdXR0b24iLCJ0cmFzaEJ1dHRvbiIsIl90aGlzIiwiaW1nTW9kYWwiLCJ0aXRsZUNhcmQiLCJzcmMiLCJlIiwiY2xvc2VzdCIsInJlbW92ZSIsInRlbXBsYXRlQ2FyZCIsIl9nZXRUZW1wbGF0ZSIsImNhcmRUaXRsZSIsImFsdCIsIl9zZXRFdmVudExpc3RlbmVycyIsIlBvcHVwV2l0aEZvcm0iLCJfUG9wdXAiLCJwb3B1cEVsZW1lbnQiLCJzdWJtaXQiLCJfY2FsbFN1cGVyIiwiX3BvcHVwRWxlbWVudCIsIl9pc09wZW4iLCJfb3ZlcmxheSIsIl9zdWJtaXQiLCJfaW5oZXJpdHMiLCJpbnB1dE5hbWVDYXJkUGxhY2UiLCJpbnB1dFVybENhcmRQbGFjZSIsImlucHV0TmFtZSIsImlucHV0SW5mbyIsIl90aGlzMiIsInByZXZlbnREZWZhdWx0IiwiaW5wdXRWYWx1ZXMiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJvYmpDb25maWdQbGFjZSIsIm1vZGFsRm9ybSIsInZhbHVlc0lucHV0IiwidGl0bGVJbnB1dCIsInVybEluZm8iLCJ0aXRsZVZhbGlkYXRlIiwiRm9ybSIsInVybFZhbGlkYXRlIiwiZW5hYmxlVmFsaWRhdGlvbiIsIlBvcHVwIiwiX3BvcHVwIiwiY2xvc2UiLCJfaGFuZGxlRXNjQ2xvc2UiLCJVc2VySW5mbyIsIm9iakVsZW1lbnRzIiwiX29iakVsZW1lbnRzIiwiZmllbGQiLCJ1c2VyTmFtZSIsInVzZXJKb2IiLCJjb250YWluZXJDYXJkcyIsIm5ld1VzZXIiLCJVc2VyIiwiRm9ybVZhbGlkYXRvciIsIm9iakNvbmZpZyIsInRvVmFsaWRhdGUiLCJfb2JqQ29uZmlnIiwiX3RvVmFsaWRhdGUiLCJfc2V0VmFsaWRhdGlvbiIsInR5cGVNb2RhbCIsImNsYXNzSW5wdXQiLCJyZXBsYWNlQWxsIiwiaW5wdXRWYWx1ZSIsIm5ld0NhcmQiLCJjcmVhdGVDYXJkIiwicHJlcGVuZCIsImlkIiwic2V0VXNlckluZm8iLCJzZXRFdmVudExpc3RlbmVycyIsIlNlY3Rpb24iLCJfcmVmIiwiY2xhc3NSZW5kZXIiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIml0ZW0iLCJlbGVtZW50IiwiYXBwZW5kIiwidXNlciIsIm5hbWUiLCJqb2IiLCJnZXRVc2VySW5mbyIsImxvYWRDYXJkcyIsImxpbmsiLCJjYXJkRWxlbWVudCIsImFkZEl0ZW0iLCJBcnJheSIsImZyb20iLCJmb3JtRWxlbWVudCIsImlucHV0RWxlbWVudCIsInZhbGlkaXR5IiwidmFsaWQiLCJlcnJvckVsZW1lbnQiLCJjb25jYXQiLCJoaWRlSW5wdXRFcnJvciIsImVycm9yTWVzc2FnZSIsImNvbnNvbGUiLCJsb2ciLCJzaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiY2hlY2tJbnB1dFZhbGlkaXR5Il0sInNvdXJjZVJvb3QiOiIifQ==